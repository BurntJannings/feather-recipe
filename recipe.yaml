$engine: 3
$onesync: on
name: Feather
description: The official recipe for Feather Framework.
version: 1.0.0
author: bcc

tasks:
  # Prepare Database
  - action: connect_database

  # Download DB
  - action: download_file
    url: https://github.com/FeatherFramework/feather-recipe/database
    ref: main
    path: ./database

  # Migrate(Setup) Database Tables
  - action: query_database
    file: ./database/migration.sql

  # Seed Database
  - action: query_database
    file: ./database/seed.sql

  # Download default CFX resources
  - action: download_github
    src: https://github.com/citizenfx/cfx-server-data
    ref: master
    subpath: resources
    dest: ./resources

  # Download default server config
  - action: download_file
    url: https://raw.githubusercontent.com/FeatherFramework/feather-recipe/main/server.cfg
    path: ./server.cfg

  # Download default server icon
  - action: download_file
    url: https://raw.githubusercontent.com/FeatherFramework/feather-recipe/main/servericon.png
    path: ./servericon.png

  # Download Feather files
  - action: download_file
    url: https://github.com/FeatherFramework/feather-core
    ref: main
    path: ./resources/[feather]

  # Clean up db files
  - action: remove_path
    path: ./database
